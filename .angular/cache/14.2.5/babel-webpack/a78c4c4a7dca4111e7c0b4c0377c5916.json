{"ast":null,"code":"import { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nexport class Subscriber extends Subscription {\n  constructor(destination) {\n    super();\n    this.isStopped = false;\n\n    if (destination) {\n      this.destination = destination;\n\n      if (isSubscription(destination)) {\n        destination.add(this);\n      }\n    } else {\n      this.destination = EMPTY_OBSERVER;\n    }\n  }\n\n  static create(next, error, complete) {\n    return new SafeSubscriber(next, error, complete);\n  }\n\n  next(value) {\n    if (this.isStopped) {\n      handleStoppedNotification(nextNotification(value), this);\n    } else {\n      this._next(value);\n    }\n  }\n\n  error(err) {\n    if (this.isStopped) {\n      handleStoppedNotification(errorNotification(err), this);\n    } else {\n      this.isStopped = true;\n\n      this._error(err);\n    }\n  }\n\n  complete() {\n    if (this.isStopped) {\n      handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n    } else {\n      this.isStopped = true;\n\n      this._complete();\n    }\n  }\n\n  unsubscribe() {\n    if (!this.closed) {\n      this.isStopped = true;\n      super.unsubscribe();\n      this.destination = null;\n    }\n  }\n\n  _next(value) {\n    this.destination.next(value);\n  }\n\n  _error(err) {\n    try {\n      this.destination.error(err);\n    } finally {\n      this.unsubscribe();\n    }\n  }\n\n  _complete() {\n    try {\n      this.destination.complete();\n    } finally {\n      this.unsubscribe();\n    }\n  }\n\n}\nexport class SafeSubscriber extends Subscriber {\n  constructor(observerOrNext, error, complete) {\n    super();\n    let next;\n\n    if (isFunction(observerOrNext)) {\n      next = observerOrNext;\n    } else if (observerOrNext) {\n      ({\n        next,\n        error,\n        complete\n      } = observerOrNext);\n      let context;\n\n      if (this && config.useDeprecatedNextContext) {\n        context = Object.create(observerOrNext);\n\n        context.unsubscribe = () => this.unsubscribe();\n      } else {\n        context = observerOrNext;\n      }\n\n      next = next === null || next === void 0 ? void 0 : next.bind(context);\n      error = error === null || error === void 0 ? void 0 : error.bind(context);\n      complete = complete === null || complete === void 0 ? void 0 : complete.bind(context);\n    }\n\n    this.destination = {\n      next: next ? wrapForErrorHandling(next, this) : noop,\n      error: wrapForErrorHandling(error !== null && error !== void 0 ? error : defaultErrorHandler, this),\n      complete: complete ? wrapForErrorHandling(complete, this) : noop\n    };\n  }\n\n}\n\nfunction wrapForErrorHandling(handler, instance) {\n  return (...args) => {\n    try {\n      handler(...args);\n    } catch (err) {\n      if (config.useDeprecatedSynchronousErrorHandling) {\n        captureError(err);\n      } else {\n        reportUnhandledError(err);\n      }\n    }\n  };\n}\n\nfunction defaultErrorHandler(err) {\n  throw err;\n}\n\nfunction handleStoppedNotification(notification, subscriber) {\n  const {\n    onStoppedNotification\n  } = config;\n  onStoppedNotification && timeoutProvider.setTimeout(() => onStoppedNotification(notification, subscriber));\n}\n\nexport const EMPTY_OBSERVER = {\n  closed: true,\n  next: noop,\n  error: defaultErrorHandler,\n  complete: noop\n};","map":{"version":3,"sources":["/Users/Noukha/noukha-website/node_modules/rxjs/dist/esm/internal/Subscriber.js"],"names":["isFunction","isSubscription","Subscription","config","reportUnhandledError","noop","nextNotification","errorNotification","COMPLETE_NOTIFICATION","timeoutProvider","captureError","Subscriber","constructor","destination","isStopped","add","EMPTY_OBSERVER","create","next","error","complete","SafeSubscriber","value","handleStoppedNotification","_next","err","_error","_complete","unsubscribe","closed","observerOrNext","context","useDeprecatedNextContext","Object","bind","wrapForErrorHandling","defaultErrorHandler","handler","instance","args","useDeprecatedSynchronousErrorHandling","notification","subscriber","onStoppedNotification","setTimeout"],"mappings":"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","sourcesContent":["import { isFunction } from './util/isFunction';\nimport { isSubscription, Subscription } from './Subscription';\nimport { config } from './config';\nimport { reportUnhandledError } from './util/reportUnhandledError';\nimport { noop } from './util/noop';\nimport { nextNotification, errorNotification, COMPLETE_NOTIFICATION } from './NotificationFactories';\nimport { timeoutProvider } from './scheduler/timeoutProvider';\nimport { captureError } from './util/errorContext';\nexport class Subscriber extends Subscription {\n    constructor(destination) {\n        super();\n        this.isStopped = false;\n        if (destination) {\n            this.destination = destination;\n            if (isSubscription(destination)) {\n                destination.add(this);\n            }\n        }\n        else {\n            this.destination = EMPTY_OBSERVER;\n        }\n    }\n    static create(next, error, complete) {\n        return new SafeSubscriber(next, error, complete);\n    }\n    next(value) {\n        if (this.isStopped) {\n            handleStoppedNotification(nextNotification(value), this);\n        }\n        else {\n            this._next(value);\n        }\n    }\n    error(err) {\n        if (this.isStopped) {\n            handleStoppedNotification(errorNotification(err), this);\n        }\n        else {\n            this.isStopped = true;\n            this._error(err);\n        }\n    }\n    complete() {\n        if (this.isStopped) {\n            handleStoppedNotification(COMPLETE_NOTIFICATION, this);\n        }\n        else {\n            this.isStopped = true;\n            this._complete();\n        }\n    }\n    unsubscribe() {\n        if (!this.closed) {\n            this.isStopped = true;\n            super.unsubscribe();\n            this.destination = null;\n        }\n    }\n    _next(value) {\n        this.destination.next(value);\n    }\n    _error(err) {\n        try {\n            this.destination.error(err);\n        }\n        finally {\n            this.unsubscribe();\n        }\n    }\n    _complete() {\n        try {\n            this.destination.complete();\n        }\n        finally {\n            this.unsubscribe();\n        }\n    }\n}\nexport class SafeSubscriber extends Subscriber {\n    constructor(observerOrNext, error, complete) {\n        super();\n        let next;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            ({ next, error, complete } = observerOrNext);\n            let context;\n            if (this && config.useDeprecatedNextContext) {\n                context = Object.create(observerOrNext);\n                context.unsubscribe = () => this.unsubscribe();\n            }\n            else {\n                context = observerOrNext;\n            }\n            next = next === null || next === void 0 ? void 0 : next.bind(context);\n            error = error === null || error === void 0 ? void 0 : error.bind(context);\n            complete = complete === null || complete === void 0 ? void 0 : complete.bind(context);\n        }\n        this.destination = {\n            next: next ? wrapForErrorHandling(next, this) : noop,\n            error: wrapForErrorHandling(error !== null && error !== void 0 ? error : defaultErrorHandler, this),\n            complete: complete ? wrapForErrorHandling(complete, this) : noop,\n        };\n    }\n}\nfunction wrapForErrorHandling(handler, instance) {\n    return (...args) => {\n        try {\n            handler(...args);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                captureError(err);\n            }\n            else {\n                reportUnhandledError(err);\n            }\n        }\n    };\n}\nfunction defaultErrorHandler(err) {\n    throw err;\n}\nfunction handleStoppedNotification(notification, subscriber) {\n    const { onStoppedNotification } = config;\n    onStoppedNotification && timeoutProvider.setTimeout(() => onStoppedNotification(notification, subscriber));\n}\nexport const EMPTY_OBSERVER = {\n    closed: true,\n    next: noop,\n    error: defaultErrorHandler,\n    complete: noop,\n};\n"]},"metadata":{},"sourceType":"module"}